% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/semimetric.R
\name{semimetric_deriv}
\alias{semimetric_deriv}
\title{Derivative-based Semimetric}
\description{
Implementation of the semimetric interface using B-spline approximations of
functional derivatives. Computes the L² distance between the q-th derivatives:

\deqn{d(f,g) = \sqrt{\int_a^b [f^{(q)}(t) - g^{(q)}(t)]^2 dt}}

The method uses B-spline basis functions for smooth approximation and 
Gaussian quadrature for numerical integration, as described by Ferraty and Vieu (2006).
}
\details{
**Mathematical Background:**

The method approximates each functional observation using B-splines of order q+3:
\deqn{X_i(t) \approx \sum_{j=1}^K c_{ij} B_j(t)}

The q-th derivative is then:
\deqn{X_i^{(q)}(t) \approx \sum_{j=1}^K c_{ij} B_j^{(q)}(t)}

**Computational Efficiency:**
- The Hhalf matrix can be reused across multiple distance computations
- Time complexity: O(K³) for setup, O(n²K) for distance matrix
- Space complexity: O(K²)
}
\examples{
\dontrun{
# Create derivative semimetric
sm <- semimetric_deriv$new(q = 2, nknot = 10, range_grid = c(0, 1))

# Generate sample data
X1 <- matrix(rnorm(50*20), 50, 20)
X2 <- matrix(rnorm(30*20), 30, 20)

# Calculate distances
distances <- sm$calculate(X1, X2)
dim(distances)  # 50 × 30 matrix
}

}
\references{
Ferraty, F. and Vieu, P. (2006). Nonparametric Functional Data Analysis. 
Springer Series in Statistics.
}
\seealso{
[semimetric], [semimetric_deriv_wrapper()], [SemimetricDerivDesign()], [SemimetricDeriv()]
}
\section{Super class}{
\code{\link[nfda:semimetric]{nfda::semimetric}} -> \code{semimetric_deriv}
}
\section{Public fields}{
\if{html}{\out{<div class="r6-fields">}}
\describe{
\item{\code{q}}{Integer order of the derivative (0=level, 1=slope, 2=curvature)}

\item{\code{nknot}}{Integer number of internal B-spline knots}

\item{\code{range_grid}}{Numeric vector c(a,b) defining the domain}

\item{\code{Hhalf}}{Matrix for efficient computation, cached between calls}

\item{\code{point_gauss}}{6-point Gauss-Legendre quadrature points for integration}

\item{\code{weight_gauss}}{Corresponding quadrature weights}
}
\if{html}{\out{</div>}}
}
\section{Methods}{
\subsection{Public methods}{
\itemize{
\item \href{#method-semimetric_deriv-new}{\code{semimetric_deriv$new()}}
\item \href{#method-semimetric_deriv-calculate}{\code{semimetric_deriv$calculate()}}
\item \href{#method-semimetric_deriv-clone}{\code{semimetric_deriv$clone()}}
}
}
\if{html}{\out{
<details open><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="nfda" data-topic="semimetric" data-id="print"><a href='../../nfda/html/semimetric.html#method-semimetric-print'><code>nfda::semimetric$print()</code></a></span></li>
</ul>
</details>
}}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-semimetric_deriv-new"></a>}}
\if{latex}{\out{\hypertarget{method-semimetric_deriv-new}{}}}
\subsection{Method \code{new()}}{
Initialize derivative semimetric
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{semimetric_deriv$new(q = 2, nknot = 20, range_grid = c(0, 1), Hhalf = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{q}}{Derivative order (default 2)}

\item{\code{nknot}}{Number of interior knots (default 20)}

\item{\code{range_grid}}{Domain c(a,b) (default c(0,1))}

\item{\code{Hhalf}}{Pre-computed design matrix or NULL}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-semimetric_deriv-calculate"></a>}}
\if{latex}{\out{\hypertarget{method-semimetric_deriv-calculate}{}}}
\subsection{Method \code{calculate()}}{
Calculate distance matrix
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{semimetric_deriv$calculate(x1, x2)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{x1}}{Matrix of functional data (n × p)}

\item{\code{x2}}{Matrix of functional data (m × p)}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
Distance matrix (n × m)
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-semimetric_deriv-clone"></a>}}
\if{latex}{\out{\hypertarget{method-semimetric_deriv-clone}{}}}
\subsection{Method \code{clone()}}{
The objects of this class are cloneable with this method.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{semimetric_deriv$clone(deep = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{deep}}{Whether to make a deep clone.}
}
\if{html}{\out{</div>}}
}
}
}
